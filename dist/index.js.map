{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./index.ts","webpack:///external \"react\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///webpack/startup"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"react\")) : factory(root[\"react\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function(__WEBPACK_EXTERNAL_MODULE__297__) {\nreturn ","import {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from \"react\";\n\ntype Action<K extends string, V = void> = V extends void\n  ? { type: K }\n  : { type: K } & V;\n\ntype ActionFetch<T> =\n  | Action<\"request\">\n  | Action<\"success\", { payload: T }>\n  | Action<\"failure\", { payload: string }>;\n\ninterface State<T> {\n  status: \"init\" | \"request\" | \"failure\" | \"success\";\n  data?: T;\n  error?: string;\n}\n\ninterface Cache<T> {\n  [url: string]: T;\n}\n\nexport const useFetch = <T>(\n  url: string,\n  options?: RequestInit,\n  isCache: boolean = false\n): [State<T>, () => void] => {\n  const cache = useRef<Cache<T>>({});\n\n  const [isFetch, setFetch] = useState(false);\n\n  const initialState = useMemo<State<T>>(\n    () => ({\n      status: \"init\",\n      error: undefined,\n      data: undefined,\n    }),\n    []\n  );\n\n  const fetchReducer = useCallback(\n    (state: State<T>, action: ActionFetch<T>): State<T> => {\n      switch (action.type) {\n        case \"request\":\n          return { ...initialState, status: \"request\" };\n        case \"success\":\n          return { ...initialState, status: \"success\", data: action.payload };\n        case \"failure\":\n          return { ...initialState, status: \"failure\", error: action.payload };\n        default:\n          return state;\n      }\n    },\n    [initialState]\n  );\n\n  const [state, dispatch] = useReducer(fetchReducer, initialState);\n  const request = useCallback(() => dispatch({ type: \"request\" }), []);\n  const success = useCallback(\n    (payload) => dispatch({ type: \"success\", payload }),\n    []\n  );\n  const failure = useCallback(\n    (payload) => dispatch({ type: \"failure\", payload }),\n    []\n  );\n\n  useEffect(() => {\n    if (!url || !isFetch) {\n      return;\n    }\n\n    let cancelRequest = false;\n\n    (async () => {\n      request();\n\n      if (isCache && cache.current[url]) {\n        setFetch(() => false);\n        !cancelRequest && success(cache.current[url]);\n        return;\n      }\n\n      try {\n        const response = await fetch(url, options);\n        const data = await response.json();\n\n        cache.current[url] = data;\n        setFetch(() => false);\n        !cancelRequest && success(data);\n      } catch (error) {\n        setFetch(() => false);\n        !cancelRequest && failure(error.message);\n      }\n    })();\n\n    return () => {\n      cancelRequest = true;\n    };\n  }, [failure, isCache, isFetch, options, request, success, url]);\n\n  const doFetch = useCallback(() => setFetch(() => true), []);\n\n  return [state, doFetch];\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__297__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(303);\n"],"sourceRoot":""}