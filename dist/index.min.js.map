{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./index.ts","webpack:///external \"react\"","webpack:///webpack/bootstrap","webpack:///webpack/startup","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__297__","useFetch","url","options","isCache","cache","useRef","isFetch","setFetch","useState","initialState","useMemo","status","error","undefined","data","fetchReducer","useCallback","state","action","type","payload","dispatch","useReducer","request","success","failure","useEffect","cancelRequest","current","response","fetch","json","message","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value"],"mappings":"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","file":"index.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"react\")) : factory(root[\"react\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function(__WEBPACK_EXTERNAL_MODULE__297__) {\nreturn ","import {\n  useCallback,\n  useEffect,\n  useMemo,\n  useReducer,\n  useRef,\n  useState,\n} from \"react\";\n\ntype Action<K extends string, V = void> = V extends void\n  ? { type: K }\n  : { type: K } & V;\n\ntype ActionFetch<T> =\n  | Action<\"request\">\n  | Action<\"success\", { payload: T }>\n  | Action<\"failure\", { payload: string }>;\n\ninterface State<T> {\n  status: \"init\" | \"request\" | \"failure\" | \"success\";\n  data?: T;\n  error?: string;\n}\n\ninterface Cache<T> {\n  [url: string]: T;\n}\n\nexport const useFetch = <T>(\n  url: string,\n  options?: RequestInit,\n  isCache: boolean = false\n): [State<T>, () => void] => {\n  const cache = useRef<Cache<T>>({});\n\n  const [isFetch, setFetch] = useState(false);\n\n  const initialState = useMemo<State<T>>(\n    () => ({\n      status: \"init\",\n      error: undefined,\n      data: undefined,\n    }),\n    []\n  );\n\n  const fetchReducer = useCallback(\n    (state: State<T>, action: ActionFetch<T>): State<T> => {\n      switch (action.type) {\n        case \"request\":\n          return { ...initialState, status: \"request\" };\n        case \"success\":\n          return { ...initialState, status: \"success\", data: action.payload };\n        case \"failure\":\n          return { ...initialState, status: \"failure\", error: action.payload };\n        default:\n          return state;\n      }\n    },\n    [initialState]\n  );\n\n  const [state, dispatch] = useReducer(fetchReducer, initialState);\n  const request = useCallback(() => dispatch({ type: \"request\" }), []);\n  const success = useCallback(\n    (payload) => dispatch({ type: \"success\", payload }),\n    []\n  );\n  const failure = useCallback(\n    (payload) => dispatch({ type: \"failure\", payload }),\n    []\n  );\n\n  useEffect(() => {\n    if (!url || !isFetch) {\n      return;\n    }\n\n    let cancelRequest = false;\n\n    (async () => {\n      request();\n\n      if (isCache && cache.current[url]) {\n        setFetch(() => false);\n        !cancelRequest && success(cache.current[url]);\n        return;\n      }\n\n      try {\n        const response = await fetch(url, options);\n        const data = await response.json();\n\n        cache.current[url] = data;\n        setFetch(() => false);\n        !cancelRequest && success(data);\n      } catch (error) {\n        setFetch(() => false);\n        !cancelRequest && failure(error.message);\n      }\n    })();\n\n    return () => {\n      cancelRequest = true;\n    };\n  }, [failure, isCache, isFetch, options, request, success, url]);\n\n  const doFetch = useCallback(() => setFetch(() => true), []);\n\n  return [state, doFetch];\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__297__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(303);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}